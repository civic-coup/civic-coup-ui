{"version":3,"sources":["components/AddressForm/AddressForm.js","constants.js","components/AddressForm/index.js","components/CandidateListing/CandidateListing.js","components/CandidateListing/index.js","components/App/App.js","components/App/index.js","index.js"],"names":["autoComplete","CANDIDATE_DATA_URL","AddressForm","onLocatePlace","useState","input","setInput","autoCompleteRef","useRef","url","onLoad","handlerFn","ref","window","google","maps","places","Autocomplete","current","types","componentRestrictions","country","fields","navigator","geolocation","getCurrentPosition","position","circle","Circle","center","lat","coords","latitude","lng","longitude","radius","accuracy","setBounds","getBounds","addListener","address","getPlace","formatted_address","type","placeholder","value","onChange","event","target","CandidateListing","electionCandidates","setElectionCandidates","candidateInformation","setCandidateInformation","ready","setReady","onScriptLoad","a","gapi","load","client","setApiKey","useEffect","fetch","resp","json","data","fetchCandidateInformation","civicinfo","representatives","representativeInfoByAddress","then","response","result","officials","fetchElectionCandidates","length","map","val","idx","key","name","CandidateName","App","setAddress","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d530f4d1.chunk.js","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport Script from \"react-load-script\";\n\nimport \"./AddressForm.css\";\nimport { GOOGLE_PLACES_API_KEY } from \"../../constants\";\n\nlet autoComplete;\n\n// eslint-disable-next-line react/prop-types\nfunction AddressForm({ onLocatePlace }) {\n  const [input, setInput] = useState(\"\");\n  const autoCompleteRef = useRef(null);\n\n  const onScriptLoad = (handlerFn, ref) => {\n    autoComplete = new window.google.maps.places.Autocomplete(ref.current, {\n      types: [\"geocode\"],\n      componentRestrictions: { country: \"us\" },\n      fields: [\"formatted_address\"],\n    });\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((position) => {\n        const circle = new window.google.maps.Circle({\n          center: {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          },\n          radius: position.coords.accuracy,\n        });\n\n        autoComplete.setBounds(circle.getBounds());\n      });\n    }\n\n    autoComplete.addListener(\"place_changed\", () => {\n      const addressObject = autoComplete.getPlace();\n      const address = addressObject.formatted_address;\n      handlerFn(address);\n    });\n  };\n\n  return (\n    <div>\n      <Script\n        url={`https://maps.googleapis.com/maps/api/js?key=${GOOGLE_PLACES_API_KEY}&libraries=places`}\n        onLoad={() => onScriptLoad(onLocatePlace, autoCompleteRef)}\n      />\n      <input\n        type=\"text\"\n        placeholder=\"Enter your address\"\n        ref={autoCompleteRef}\n        value={input}\n        onChange={(event) => setInput(event.target.value)}\n      />\n    </div>\n  );\n}\n\nexport default AddressForm;\n","// Candidate Data URLs\nexport const CANDIDATE_DATA_URL =\n  \"https://civic-coup.github.io/data/candidates/index.json\";\n\n// Keys :(\nexport const GOOGLE_PLACES_API_KEY = \"AIzaSyBd_1eJQIXma_-FkL88k8DrVU0b6RfvOXc\";\nexport const GOOGLE_API_KEY = \"AIzaSyCgRnwb1bj2OXkG0ELSPUNq9IZj141FoWk\";\n","import AddressForm from \"./AddressForm\";\n\nexport default AddressForm;\n","import React, { useState, useEffect } from \"react\";\nimport Script from \"react-load-script\";\n\nimport \"./CandidateListing.css\";\nimport { CANDIDATE_DATA_URL, GOOGLE_API_KEY } from \"../../constants\";\n\n// eslint-disable-next-line react/prop-types\nfunction CandidateListing({ address }) {\n  const [electionCandidates, setElectionCandidates] = useState([]);\n  const [candidateInformation, setCandidateInformation] = useState([]);\n  const [ready, setReady] = useState(false);\n\n  const onScriptLoad = async () => {\n    await window.gapi.load(\"client\", async () => {\n      await window.gapi.client.setApiKey(GOOGLE_API_KEY);\n      await window.gapi.client.load(\n        \"https://content.googleapis.com/discovery/v1/apis/civicinfo/v2/rest\"\n      );\n      setReady(true);\n    });\n  };\n\n  useEffect(() => {\n    async function fetchCandidateInformation() {\n      const resp = await fetch(CANDIDATE_DATA_URL);\n      const data = await resp.json();\n      setCandidateInformation(data);\n    }\n    fetchCandidateInformation();\n  }, []);\n\n  useEffect(() => {\n    async function fetchElectionCandidates() {\n      window.gapi.client.civicinfo.representatives\n        .representativeInfoByAddress({ address })\n        .then((response) => {\n          const { result } = response;\n          setElectionCandidates(result.officials);\n        });\n    }\n\n    if (ready) {\n      fetchElectionCandidates();\n    }\n  }, [address, ready]);\n\n  return (\n    <div>\n      <Script url=\"https://apis.google.com/js/api.js\" onLoad={onScriptLoad} />\n\n      {address && (\n        <div>\n          <p>Your Address:</p>\n          <p>{address}</p>\n        </div>\n      )}\n\n      {electionCandidates.length && (\n        <div>\n          <p>Election Candidates:</p>\n          <ul>\n            {electionCandidates.map((val, idx) => {\n              return <li key={idx}>{val.name}</li>; // eslint-disable-line react/no-array-index-key\n            })}\n          </ul>\n        </div>\n      )}\n\n      {candidateInformation.length && (\n        <div>\n          <p>Candidate Information:</p>\n          <ul>\n            {candidateInformation.map((val, idx) => {\n              return <li key={idx}>{val.CandidateName}</li>; // eslint-disable-line react/no-array-index-key\n            })}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default CandidateListing;\n","import CandidateListing from \"./CandidateListing\";\n\nexport default CandidateListing;\n","import React, { useState } from \"react\";\n\nimport \"./App.css\";\nimport AddressForm from \"../AddressForm\";\nimport CandidateListing from \"../CandidateListing\";\n\nfunction App() {\n  const [address, setAddress] = useState(\"\");\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        {address ? (\n          <CandidateListing address={address} />\n        ) : (\n          <AddressForm onLocatePlace={(input) => setAddress(input)} />\n        )}\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import App from \"./App\";\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}