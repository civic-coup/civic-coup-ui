{"version":3,"sources":["components/AddressForm/AddressForm.js","constants.js","components/AddressForm/index.js","components/CandidateListing/CandidateListing.js","components/CandidateListing/index.js","components/App/App.js","components/App/index.js","index.js"],"names":["autoComplete","CANDIDATE_DATA_URL","AddressForm","onLocatePlace","useState","input","setInput","autoCompleteRef","useRef","url","onLoad","handlerFn","ref","window","google","maps","places","Autocomplete","current","types","componentRestrictions","country","fields","navigator","geolocation","getCurrentPosition","position","circle","Circle","center","lat","coords","latitude","lng","longitude","radius","accuracy","setBounds","getBounds","addListener","address","getPlace","formatted_address","type","placeholder","value","onChange","event","target","gapiOfficeToSearchOffice","getSearchId","office","divisionId","split","slice","getDistrictNumber","CandidateListing","candidateInformation","setCandidateInformation","stateSenatorCandidates","setStateSenatorCandidates","usRepCandidates","setUsRepCandidates","assemblyCandidates","setAssemblyCandidates","ready","setReady","onScriptLoad","a","gapi","load","client","setApiKey","useEffect","fetch","resp","json","data","fetchCandidateInformation","civicinfo","representatives","representativeInfoByAddress","then","response","result","offices","forEach","r","name","searchId","filtered","filter","d","SearchId","fetchElectionCandidates","length","map","val","idx","CandidateName","Party","Issues","App","setAddress","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.21349b70.chunk.js","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport Script from \"react-load-script\";\n\nimport \"./AddressForm.css\";\nimport { GOOGLE_PLACES_API_KEY } from \"../../constants\";\n\nlet autoComplete;\n\n// eslint-disable-next-line react/prop-types\nfunction AddressForm({ onLocatePlace }) {\n  const [input, setInput] = useState(\"\");\n  const autoCompleteRef = useRef(null);\n\n  const onScriptLoad = (handlerFn, ref) => {\n    autoComplete = new window.google.maps.places.Autocomplete(ref.current, {\n      types: [\"geocode\"],\n      componentRestrictions: { country: \"us\" },\n      fields: [\"formatted_address\"],\n    });\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((position) => {\n        const circle = new window.google.maps.Circle({\n          center: {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          },\n          radius: position.coords.accuracy,\n        });\n\n        autoComplete.setBounds(circle.getBounds());\n      });\n    }\n\n    autoComplete.addListener(\"place_changed\", () => {\n      const addressObject = autoComplete.getPlace();\n      const address = addressObject.formatted_address;\n      handlerFn(address);\n    });\n  };\n\n  return (\n    <div>\n      <Script\n        url={`https://maps.googleapis.com/maps/api/js?key=${GOOGLE_PLACES_API_KEY}&libraries=places`}\n        onLoad={() => onScriptLoad(onLocatePlace, autoCompleteRef)}\n      />\n      <input\n        type=\"text\"\n        placeholder=\"Enter your address\"\n        ref={autoCompleteRef}\n        value={input}\n        onChange={(event) => setInput(event.target.value)}\n      />\n    </div>\n  );\n}\n\nexport default AddressForm;\n","// Candidate Data URLs\nexport const CANDIDATE_DATA_URL =\n  \"https://civic-coup.github.io/data/candidates/index.json\";\n\n// Google API Information\nexport const GOOGLE_API_SCRIPT_URL = \"https://apis.google.com/js/api.js\";\nexport const GOOGLE_CIVIC_INFO_URL =\n  \"https://content.googleapis.com/discovery/v1/apis/civicinfo/v2/rest\";\nexport const GOOGLE_PLACES_API_KEY = \"AIzaSyAmziDvozHp7yzlPt-Rt6T-SCxqQxVsKv8\";\nexport const GOOGLE_API_KEY = \"AIzaSyCgRnwb1bj2OXkG0ELSPUNq9IZj141FoWk\";\n","import AddressForm from \"./AddressForm\";\n\nexport default AddressForm;\n","import React, { useState, useEffect } from \"react\";\nimport Script from \"react-load-script\";\n\nimport \"./CandidateListing.css\";\nimport {\n  CANDIDATE_DATA_URL,\n  GOOGLE_API_KEY,\n  GOOGLE_API_SCRIPT_URL,\n  GOOGLE_CIVIC_INFO_URL,\n} from \"../../constants\";\n\nconst gapiOfficeToSearchOffice = {\n  \"NY State Senator\": \"state-senator\",\n  \"NY State Assemblymember\": \"assembly-member\",\n  \"U.S. Representative\": \"us-representative\",\n};\n\nfunction getDistrictNumber(divisionId) {\n  return divisionId.split(\":\").slice(-1)[0];\n}\n\nfunction getSearchId(office, divisionId) {\n  return `${gapiOfficeToSearchOffice[office]}-${getDistrictNumber(divisionId)}`;\n}\n\n// eslint-disable-next-line react/prop-types\nfunction CandidateListing({ address }) {\n  const [candidateInformation, setCandidateInformation] = useState([]);\n  const [stateSenatorCandidates, setStateSenatorCandidates] = useState([]);\n  const [usRepCandidates, setUsRepCandidates] = useState([]);\n  const [assemblyCandidates, setAssemblyCandidates] = useState([]);\n  const [ready, setReady] = useState(false);\n\n  const onScriptLoad = async () => {\n    await window.gapi.load(\"client\", async () => {\n      await window.gapi.client.setApiKey(GOOGLE_API_KEY);\n      await window.gapi.client.load(GOOGLE_CIVIC_INFO_URL);\n      setReady(true);\n    });\n  };\n\n  useEffect(() => {\n    async function fetchCandidateInformation() {\n      const resp = await fetch(CANDIDATE_DATA_URL);\n      const data = await resp.json();\n      setCandidateInformation(data);\n    }\n    fetchCandidateInformation();\n  }, []);\n\n  useEffect(() => {\n    async function fetchElectionCandidates() {\n      await window.gapi.client.civicinfo.representatives\n        .representativeInfoByAddress({ address })\n        .then((response) => {\n          const { result } = response;\n          result.offices.forEach((r) => {\n            const { name, divisionId } = r;\n            const searchId = getSearchId(name, divisionId);\n            const filtered = candidateInformation.filter(\n              (d) => d.SearchId === searchId\n            );\n\n            if (name === \"NY State Senator\") {\n              setStateSenatorCandidates(filtered);\n            } else if (name === \"U.S. Representative\") {\n              setUsRepCandidates(filtered);\n            } else if (name === \"NY State Assemblymember\") {\n              setAssemblyCandidates(filtered);\n            }\n          });\n        });\n    }\n\n    if (ready) {\n      fetchElectionCandidates();\n    }\n  }, [address, candidateInformation, ready]);\n\n  return (\n    <div>\n      <Script url={GOOGLE_API_SCRIPT_URL} onLoad={onScriptLoad} />\n      {address && (\n        <div>\n          <p>Your Address:</p>\n          <p>{address}</p>\n        </div>\n      )}\n      {stateSenatorCandidates.length > 0 && (\n        <div>\n          <hr />\n          <p>State Senators:</p>\n          <ul>\n            {stateSenatorCandidates.map((val, idx) => {\n              const { CandidateName, Party, Issues } = val;\n              return (\n                // eslint-disable-next-line react/no-array-index-key\n                <li key={idx}>{`${CandidateName} (${Party}) - ${Issues}`}</li>\n              );\n            })}\n          </ul>\n        </div>\n      )}\n      {usRepCandidates.length > 0 && (\n        <div>\n          <hr />\n          <p>US Representatives:</p>\n          <ul>\n            {usRepCandidates.map((val, idx) => {\n              const { CandidateName, Party, Issues } = val;\n              return (\n                // eslint-disable-next-line react/no-array-index-key\n                <li key={idx}>{`${CandidateName} (${Party}) - ${Issues}`}</li>\n              );\n            })}\n          </ul>\n        </div>\n      )}\n      {assemblyCandidates.length > 0 && (\n        <div>\n          <hr />\n          <p>State Assembly:</p>\n          <ul>\n            {assemblyCandidates.map((val, idx) => {\n              const { CandidateName, Party, Issues } = val;\n              return (\n                // eslint-disable-next-line react/no-array-index-key\n                <li key={idx}>{`${CandidateName} (${Party}) - ${Issues}`}</li>\n              );\n            })}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default CandidateListing;\n","import CandidateListing from \"./CandidateListing\";\n\nexport default CandidateListing;\n","import React, { useState } from \"react\";\n\nimport \"./App.css\";\nimport AddressForm from \"../AddressForm\";\nimport CandidateListing from \"../CandidateListing\";\n\nfunction App() {\n  const [address, setAddress] = useState(\"\");\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        {address ? (\n          <CandidateListing address={address} />\n        ) : (\n          <AddressForm onLocatePlace={(input) => setAddress(input)} />\n        )}\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import App from \"./App\";\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}